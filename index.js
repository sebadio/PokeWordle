var $=document.querySelector(".pokemon"),C=document.querySelector(".juegoContainer"),X=document.querySelector(".tipos");var H=document.querySelector("#teclado").innerHTML,F=[],E="",J=6,G=0,Z=document.querySelector(".spinner"),M=()=>{Z.style.display="block"},N=()=>{Z.style.display="none"},Q=()=>{M(),fetch(`https://pokeapi.co/api/v2/pokemon/${Math.floor(Math.random()*898)}/`).then((f)=>f.json()).then((f)=>Y(f)).catch((f)=>{if(f)console.log(f),Q()})},Y=(f)=>{if(window.innerWidth<=500)if(f.name.length>8)Q();else W(f);else W(f)},W=(f)=>{const q=document.getElementById("pokemon");E=f.species.name,q.src=f.sprites.front_default,q.id="pokemon",q.style.filter="contrast(0)",q.classList.remove("hide"),$.appendChild(q),N(),A(f),S()},A=(f)=>{f.types.forEach((q)=>{const v=q.type.name,z=document.createElement("img");z.src=`media/tipos/${v}.webp`,z.alt=`${v} Type`,z.width="48",z.height="18",X.appendChild(z)})},S=()=>{const f=document.createElement("div");f.id="tabla";for(let q=0;q<6;q++){const v=document.createElement("div");v.className="row-boxes";for(let z=0;z<E.length;z++){const B=document.createElement("div");B.className="box",v.appendChild(B)}f.appendChild(v)}C.appendChild(f)},w=(f)=>{if(G===E.length)return;const v=document.getElementsByClassName("row-boxes")[6-J].children[G];v.textContent=f,v.classList.add("box-rellena"),F.push(f),G+=1},D=()=>{const q=document.getElementsByClassName("row-boxes")[6-J].children[G-1];q.textContent="",q.classList.remove("box-rellena"),F.pop(),G-=1},I=()=>{const f=document.getElementsByClassName("row-boxes")[6-J];let q=F.join("");const v=E,z=document.getElementById("pokemon");if(q.length!=E.length){U("El intento actual no tiene las suficientes letras","warning",!1);return}for(let B=0;B<E.length;B++)K(B,v,f);if(q===E)setTimeout(()=>{U("Adivinaste correctamente, Felicidades!","safe",!0),z.style.filter="contrast(1)"},E.length*250);else J-=1,F=[],G=0;if(J===0)setTimeout(()=>{U("Te quedaste sin intentos, el Pokemon era "+E.toUpperCase(),"danger",!0),z.style.filter="contrast(1)"},E.length*250)},x=(f,q)=>{document.querySelectorAll(".teclado-boton").forEach((v)=>{if(f===v.textContent){let z=v;if(z.classList.contains(q))return;if(z.classList.add(q),v.classList.contains("keyWarning")&&q=="keySafe")z.classList.remove("keyWarning"),z.classList.add("keySafe")}})},P=()=>{document.querySelector("#tabla").parentElement.removeChild(document.querySelector("#tabla")),document.getElementById("pokemon").classList.add("hide"),Array.from(X.children).forEach((f)=>{f.parentElement.removeChild(f)}),document.querySelector("#popup").parentElement.removeChild(document.querySelector("#popup"))},R=()=>{P(),J=6,G=0,F=[],document.querySelector("#teclado").innerHTML=H,Q()},U=(f,q,v)=>{const z=document.createElement("div");if(z.id="popup",z.className=`animacionPopup ${q}`,z.appendChild(document.createTextNode(f)),v===!0){const B=document.createElement("button");B.innerHTML=" Jugar de nuevo ",B.addEventListener("click",R),z.appendChild(B)}if(document.querySelector(".pokeWordle").appendChild(z),!v)setTimeout(()=>{document.querySelector("#popup").parentElement.removeChild(document.querySelector("#popup"))},2500)},h=(f)=>{if(J===0)return;const q=String(f.key);if(q==="Backspace"&&G!==0){D();return}if(q==="Enter"){I();return}let v=q.match(/[a-z-]/gi);if(q==="F2"||q==="F3"||q==="F4"||q==="F5"||q==="F6"||q==="F7"||q==="F8"||q==="F9"||q==="F10"||q==="F11"||q==="F12")return;else if(!v||v.length>1)return;else w(q)},j=(f)=>{const q=f.target;if(!q.classList.contains("teclado-boton"))return;let v=q.textContent;if(v==="Del")v="Backspace";document.dispatchEvent(new KeyboardEvent("keyup",{key:v}))},K=(f,q,v)=>{const z=200*f;let B="";const V=v.children[f],_=F[f];let O=!1;if(q.indexOf(F[f],f)===-1)B="keyWrong",O=!0;if(!O&&F[f]===q[f])B="keySafe",O=!0;if(!O)B="keyWarning",O=!0;setTimeout(()=>{V.classList.add("animacion"),setTimeout(()=>{V.classList.add(B)},250),x(_,B)},z)};document.addEventListener("keyup",(f)=>{h(f)});document.getElementById("teclado").addEventListener("click",(f)=>{j(f)});window.onload=()=>{Q()};
