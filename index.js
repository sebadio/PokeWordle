var $=document.querySelector(".pokemon"),G=document.createElement("img"),C=document.querySelector(".juegoContainer"),X=document.querySelector(".tipos");var M=document.querySelector("#teclado").innerHTML,v=[],q="",H=6,z=0,Y=document.querySelector(".spinner"),N=()=>{Y.style.display="block"},U=()=>{Y.style.display="none"},O=()=>{N(),fetch(`https://pokeapi.co/api/v2/pokemon/${Math.floor(Math.random()*898)}/`).then((E)=>E.json()).then((E)=>S(E)).catch((E)=>{if(E)console.log(E),O()})},S=(E)=>{if(window.innerWidth<=500)if(E.name.length>8)O();else W(E);else W(E)},W=(E)=>{q=E.species.name,G.src=E.sprites.front_default,G.id="pokemon",G.style.filter="contrast(0)",G.alt="Secret Pokemon",$.appendChild(G),U(),A(E),I()},A=(E)=>{E.types.forEach((B)=>{const F=B.type.name,_=document.createElement("img");_.src=`media/tipos/${F}.webp`,_.alt=`${F} Type`,X.appendChild(_)})},I=()=>{const E=document.createElement("div");E.id="tabla";for(let B=0;B<6;B++){const F=document.createElement("div");F.className="row-boxes";for(let _=0;_<q.length;_++){const f=document.createElement("div");f.className="box",F.appendChild(f)}E.appendChild(F)}C.appendChild(E)},D=(E)=>{if(z===q.length)return;const F=document.getElementsByClassName("row-boxes")[6-H].children[z];F.textContent=E,F.classList.add("box-rellena"),v.push(E),z+=1},w=()=>{const B=document.getElementsByClassName("row-boxes")[6-H].children[z-1];B.textContent="",B.classList.remove("box-rellena"),v.pop(),z-=1},x=()=>{const E=document.getElementsByClassName("row-boxes")[6-H];let B=v.join("");const F=q;if(B.length!=q.length){Q("El intento actual no tiene las suficientes letras","warning",!1);return}for(let _=0;_<q.length;_++)K(_,F,E);if(B===q)setTimeout(()=>{Q("Adivinaste correctamente, Felicidades!","safe",!0),G.style.filter="contrast(1)"},q.length*250);else H-=1,v=[],z=0;if(H===0)setTimeout(()=>{Q("Te quedaste sin intentos, el Pokemon era "+q.toUpperCase(),"danger",!0),G.style.filter="contrast(1)"},q.length*250)},P=(E,B)=>{document.querySelectorAll(".teclado-boton").forEach((F)=>{if(E===F.textContent){let _=F;if(_.classList.contains(B))return;if(_.classList.add(B),F.classList.contains("keyWarning")&&B=="keySafe")_.classList.remove("keyWarning"),_.classList.add("keySafe")}})},R=()=>{document.querySelector("#tabla").parentElement.removeChild(document.querySelector("#tabla")),document.querySelector("#pokemon").parentElement.removeChild(document.querySelector("#pokemon")),Array.from(X.children).forEach((E)=>{E.parentElement.removeChild(E)}),document.querySelector("#popup").parentElement.removeChild(document.querySelector("#popup"))},h=()=>{R(),H=6,z=0,v=[],document.querySelector("#teclado").innerHTML=M,O()},Q=(E,B,F)=>{const _=document.createElement("div");if(_.id="popup",_.className=`animacionPopup ${B}`,_.appendChild(document.createTextNode(E)),F===!0){const f=document.createElement("button");f.innerHTML=" Jugar de nuevo ",f.addEventListener("click",h),_.appendChild(f)}if(document.querySelector(".pokeWordle").appendChild(_),!F)setTimeout(()=>{document.querySelector("#popup").parentElement.removeChild(document.querySelector("#popup"))},2500)},j=(E)=>{if(H===0)return;const B=String(E.key);if(B==="Backspace"&&z!==0){w();return}if(B==="Enter"){x();return}let F=B.match(/[a-z-]/gi);if(B==="F2"||B==="F3"||B==="F4"||B==="F5"||B==="F6"||B==="F7"||B==="F8"||B==="F9"||B==="F10"||B==="F11"||B==="F12")return;else if(!F||F.length>1)return;else D(B)},k=(E)=>{const B=E.target;if(!B.classList.contains("teclado-boton"))return;let F=B.textContent;if(F==="Del")F="Backspace";document.dispatchEvent(new KeyboardEvent("keyup",{key:F}))},K=(E,B,F)=>{const _=200*E;let f="";const V=F.children[E],Z=v[E];let J=!1;if(B.indexOf(v[E])===-1)f="keyWrong",J=!0;if(!J&&v[E]===B[E])f="keySafe",J=!0;if(!J)f="keyWarning",J=!0;setTimeout(()=>{V.classList.add("animacion"),setTimeout(()=>{V.classList.add(f)},250),P(Z,f)},_)};document.addEventListener("keyup",(E)=>{j(E)});document.getElementById("teclado").addEventListener("click",(E)=>{k(E)});window.onload=()=>{O()};
